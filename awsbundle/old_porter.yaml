# This is the configuration for Porter
# You must define steps for each action, but the rest is optional
# See https://getporter.org/bundle/manifest/file-format/ for a description of all the allowed fields in this document.
# See https://getporter.org/author-bundles for documentation on how to configure your bundle.
# Uncomment out the sections below to take full advantage of what Porter can do!

# Version of the porter.yaml schema used by this file.
schemaVersion: 1.0.0

# Name of the bundle
name: awsbundle

# Version of the bundle. Change this each time you modify a published bundle.
version: 1.0.0

# Description of the bundle and what it does.
description: "Bundle that creates a EC2 instance"

# Registry where the bundle is published to by default
registry: "dejanualex"

# If you want to customize the Dockerfile in use, uncomment the line below and update the referenced file. 
# See https://getporter.org/bundle/custom-dockerfile/
#dockerfile: template.Dockerfile

# Declare and optionally configure the mixins used by the bundle
mixins:
  - aws

name: aws
credentials:
- name: AWS_SECRET_ACCESS_KEY
  env: AWS_SECRET_ACCESS_KEY
- name: AWS_ACCESS_KEY_ID
  env: AWS_ACCESS_KEY_ID

# Define the steps that should execute when the bundle is installed
install:
  - aws:
      description: "Provision a VM"
      service: ec2
      operation: run-instances
      flags:
        image-id: ami-xxxxxxxx
        instance-type: t2.micro

